@model LibraryManager.ViewModels.Admin.AddBookVM

@{
    Layout = "/Views/Shared/_Site.cshtml";
    ViewData["Title"] = "Add Book";
}

<h2>Add Book</h2>

@using (Html.BeginForm("AddBook", "Admin", FormMethod.Post))
{
    <div class="form-group">
        <label asp-for="Title"></label>
        <input asp-for="Title" class="form-control" />
    </div>
    <div class="form-group" id="existing-genre-section">
        <label asp-for="Genre.GenreId">Genre</label>
        <select asp-for="Genre.GenreId" class="form-control">
            @foreach (var genre in Model.Genres)
            {
                <option value="@genre.GenreId">@genre.Name</option>
            }
        </select>
    </div>
    <div class="form-group" id="new-genre-section" style="display: none;">
        <label for="NewGenre">New Genre</label>
        <input type="text" id="NewGenre" name="NewGenre" class="form-control" placeholder="Enter new genre name" />
        <button type="button" id="cancel-add-new-genre">Cancel</button>
    </div>
    <div class="form-group">
        <a id="add-new-genre-link" style="color: blue; cursor: pointer;">Add a new Genre</a>
    </div>
    <div class="form-group" id="existing-author-section">
        <label asp-for="Author.AuthorId">Author</label>
        <select asp-for="Author.AuthorId" class="form-control">
            <option value="">Select an existing author</option>
            @foreach (var author in Model.Authors)
            {
                <option value="@author.AuthorId">@author.Name</option>
            }
        </select>
    </div>
    <div class="form-group" id="new-author-section" style="display: none;">
        <label for="NewAuthor">New Author</label>
        <input type="text" id="NewAuthor" name="NewAuthor" class="form-control" placeholder="Enter new author name" />
        <button type="button" id="cancel-add-new-author">Cancel</button>
    </div>
    <div class="form-group">
        <a id="add-new-author-link" style="color: blue; cursor: pointer;">Add a new Author</a>
    </div>
    <button type="submit" class="btn btn-primary">Add Book</button>
}

<div>
    <a href="@Url.Action("Books", "Admin")">Back to List</a>
</div>

@section Scripts {
    <script>
        document.getElementById('cancel-add-new-genre').addEventListener('click',function(){
            document.getElementById('existing-genre-section').style.display='block';
            document.getElementById('new-genre-section').style.display = 'none';
            document.getElementById('add-new-genre-link').style.display = 'inline';
        });

        document.getElementById('add-new-genre-link').addEventListener('click', function() {
            document.getElementById('existing-genre-section').style.display = 'none';
            document.getElementById('new-genre-section').style.display = 'block';
            document.getElementById('add-new-genre-link').style.display ='none';
        });

        document.getElementById('cancel-add-new-author').addEventListener('click',function(){
            document.getElementById('existing-author-section').style.display='block';
            document.getElementById('new-author-section').style.display = 'none';
            document.getElementById('add-new-author-link').style.display = 'inline';
        });

        document.getElementById('add-new-author-link').addEventListener('click', function() {
            document.getElementById('existing-author-section').style.display = 'none';
            document.getElementById('new-author-section').style.display = 'block';
            document.getElementById('add-new-author-link').style.display ='none';
        });
    </script>
}
